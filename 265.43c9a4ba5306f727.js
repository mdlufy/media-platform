"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[265],{8265:(w,p,d)=>{d.r(p),d.d(p,{PagesModule:()=>O});var r=d(433),l=d(6895),e=d(1571),f=d(8095);function m(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div")(2,"span"),e._uU(3),e.qZA()(),e.BQk()),2&t){const o=n.ngIf;e.xp6(3),e.Oqu(o.email)}}function g(t,n){1&t&&(e.TgZ(0,"p"),e._uU(1,"error"),e.qZA())}let _=(()=>{class t{constructor(o){this.profileStore=o,this.profile$=o.profileData.state$}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(f.$))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-user-profile"]],decls:6,vars:4,consts:[[4,"ngIf","ngIfElse"],["error",""]],template:function(o,i){if(1&o&&(e.TgZ(0,"h2"),e._uU(1,"Profile"),e.qZA(),e.YNc(2,m,4,1,"ng-container",0),e.ALo(3,"async"),e.YNc(4,g,2,0,"ng-template",null,1,e.W1O)),2&o){const s=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,i.profile$))("ngIfElse",s)}},dependencies:[l.O5,l.Ov]}),t})();var h=d(8579),a=d(9698),u=d(529);let V=(()=>{class t{constructor(o){this.http=o}fetchVideo$(o){return this.http.get(`${a.J}/video`,{params:{id:o}})}fetchVideos$(){return this.http.get(`${a.J}/videos`)}uploadVideo$(o){return this.http.post(`${a.J}/video`,o)}deleteVideo$(o){return this.http.delete(`${a.J}/video/${o}`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(u.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),C=(()=>{class t{constructor(o){this.http=o}fetchVideos$(){return this.http.get(`${a.J}/videos`)}deleteVideos$(){return this.http.delete(`${a.J}/videos`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(u.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),x=(()=>{class t{constructor(o,i){this.videoService=o,this.videosService=i,this.videoData=new h.y([])}fetchVideos(){this.videoService.fetchVideos$().subscribe(o=>this.videoData.setState(o))}deleteVideos(){this.videosService.deleteVideos$().subscribe(()=>this.videoData.setState([]))}removeVideo(o){this.videoService.deleteVideo$(o).subscribe(()=>this.videoData.setState(this.videoData.state.filter(i=>i._id!==o)))}uploadFile(o){this.videoService.uploadVideo$(o).subscribe(i=>this.videoData.setState([...this.videoData.state,i]))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(V),e.LFG(C))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function b(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.onDeleteVideoEvent.emit(s.video._id))}),e._uU(6," Delete video "),e.qZA()(),e.TgZ(7,"div",5)(8,"video",6),e._UZ(9,"source",7),e.qZA()()(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.video.title),e.xp6(5),e.Q6J("src",o.videoUrl,e.LSH)}}let F=(()=>{class t{constructor(){this.onDeleteVideoEvent=new e.vpe,this.videoUrl=""}ngOnInit(){this.setVideoUrl()}setVideoUrl(){this.videoUrl=`${a.J}/video/${this.video._id}`}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-video"]],inputs:{video:"video"},outputs:{onDeleteVideoEvent:"onDeleteVideoEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"video-block"],[1,"video-info"],[1,"title"],[1,"delete-btn",3,"click"],[1,"video"],["controls","","width","250"],["type","video/mp4",3,"src"]],template:function(o,i){1&o&&e.YNc(0,b,10,2,"ng-container",0),2&o&&e.Q6J("ngIf",i.video)},dependencies:[l.O5],styles:[".video-block[_ngcontent-%COMP%]{margin-bottom:20px}.video-block[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{display:flex;max-width:250px;justify-content:space-between;margin-bottom:8px}.video-block[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:10px;padding:2px 5px;border:1px solid teal;border-radius:3px}.video-block[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{margin-left:10px;border-radius:5px;background-color:#e14242;cursor:pointer}"]}),t})();function S(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",4),e.NdJ("ngSubmit",function(){e.CHM(o);const s=e.oxw();return e.KtG(s.onSubmit())}),e.TgZ(2,"label",5),e._uU(3,"Video name: "),e.qZA(),e._UZ(4,"input",6),e.TgZ(5,"label",7),e._uU(6,"Video: "),e.qZA(),e.TgZ(7,"input",8),e.NdJ("change",function(s){e.CHM(o);const c=e.oxw();return e.KtG(c.onVideoFileChange(s))}),e.qZA(),e.TgZ(8,"label",9),e._uU(9,"Cover for video: "),e.qZA(),e.TgZ(10,"input",10),e.NdJ("change",function(s){e.CHM(o);const c=e.oxw();return e.KtG(c.onVideoCoverChange(s))}),e.qZA(),e.TgZ(11,"button",11),e._uU(12,"Create video"),e.qZA()(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.videoForm)}}function y(t,n){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"app-video",14),e.NdJ("onDeleteVideoEvent",function(s){e.CHM(o);const c=e.oxw(3);return e.KtG(c.onDeleteVideo(s))}),e.qZA(),e.BQk()}if(2&t){const o=n.$implicit;e.xp6(1),e.Q6J("video",o)}}function Z(t,n){if(1&t&&(e.ynx(0),e.YNc(1,y,2,1,"ng-container",13),e.BQk()),2&t){const o=n.ngIf;e.xp6(1),e.Q6J("ngForOf",o)}}function T(t,n){if(1&t&&(e.YNc(0,Z,2,1,"ng-container",12),e.ALo(1,"async")),2&t){const o=e.oxw();e.Q6J("ngIf",e.lcZ(1,1,o.videos$))}}let P=(()=>{class t{constructor(o){this.videosStore=o,this.isFormShown=!1,this.videoForm=new r.cw({videoName:new r.NI("",[r.kI.required]),videoFile:new r.NI("",[r.kI.required]),videoFileSource:new r.NI("",[r.kI.required]),videoCover:new r.NI("",[r.kI.required]),videoCoverSource:new r.NI("",[r.kI.required])}),this.videos$=o.videoData.state$}ngOnInit(){this.fetchVideos()}changeFormVisibility(){this.isFormShown=!this.isFormShown}onVideoFileChange(o){o.target?.files?.length>0&&this.videoForm.patchValue({videoFileSource:o.target.files[0]})}onVideoCoverChange(o){o.target?.files?.length>0&&this.videoForm.patchValue({videoCoverSource:o.target.files[0]})}onSubmit(){console.warn(this.videoForm.value);const o=this.videoForm.value.videoName,i=this.videoForm.value.videoFileSource,s=this.videoForm.value.videoCoverSource;if(i&&s&&o){const c=new FormData;c.append("title",o),c.append("video",i),c.append("cover",s),this.videosStore.uploadFile(c)}this.changeFormVisibility()}onDeleteVideo(o){this.videosStore.removeVideo(o)}fetchVideos(){this.videosStore.fetchVideos()}onDeleteVideos(){this.videosStore.deleteVideos()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-videos-list"]],decls:9,vars:2,consts:[[1,"upload-btn",3,"click"],[1,"delete-btn",3,"click"],[4,"ngIf","ngIfElse"],["videos",""],[3,"formGroup","ngSubmit"],["for","video-name"],["type","text","id","video-name","formControlName","videoName"],["for","video-file"],["type","file","id","video-file","formControlName","videoFile",3,"change"],["for","video-cover"],["type","file","id","video-cover","formControlName","videoCover",3,"change"],["type","submit",1,"upload-btn"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"video","onDeleteVideoEvent"]],template:function(o,i){if(1&o&&(e.TgZ(0,"h2"),e._uU(1,"Videos list"),e.qZA(),e.TgZ(2,"button",0),e.NdJ("click",function(){return i.changeFormVisibility()}),e._uU(3,"New video"),e.qZA(),e.TgZ(4,"button",1),e.NdJ("click",function(){return i.onDeleteVideos()}),e._uU(5,"Delete all"),e.qZA(),e.YNc(6,S,13,1,"ng-container",2),e.YNc(7,T,2,3,"ng-template",null,3,e.W1O)),2&o){const s=e.MAs(8);e.xp6(6),e.Q6J("ngIf",i.isFormShown)("ngIfElse",s)}},dependencies:[l.sg,l.O5,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,F,l.Ov],styles:[".upload-btn[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid black;border-radius:3px;background-color:#adff2f;cursor:pointer}.delete-btn[_ngcontent-%COMP%]{margin-left:10px;border-radius:5px;background-color:#e14242;cursor:pointer}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:150px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:not(:last-child){border-radius:4px;margin-bottom:10px}form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{border-left:5px solid #a94442}"]}),t})();var v=d(8468);const I=[{path:"videos",component:P},{path:"profile",component:_}];let M=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[v.Bz.forChild(I),v.Bz]}),t})(),O=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,M,r.UX,r.u5]}),t})()}}]);