"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[363],{9363:(et,m,i)=>{i.r(m),i.d(m,{ProfileModule:()=>tt});var h=i(4227),l=i(6895),u=i(493),a=i(9653),S=i(9791),P=i(7819),v=i(1917),E=i(9892),L=i(9646),O=i(1746),t=i(4650),U=i(9698),Z=i(529);let J=(()=>{class e{constructor(o){this.http=o}fetchUser$(o){return this.http.get(`${U.J}/user/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(Z.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),y=(()=>{class e{constructor(o,r){this.localStorageService=o,this.userService=r}getProfile$(){const o=this.localStorageService.getItem(O.L);if(!o)return(0,L.of)(null);const{email:r}=class G{constructor(){}static parseJwt(n){const[o,r]=n.split(".");return{header:JSON.parse(atob(o)),payload:JSON.parse(atob(r))}}static getFromAccessToken(n){const{payload:o}=this.parseJwt(n);return o}}.getFromAccessToken(o);return this.userService.fetchUser$(r)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(E.H3),t.LFG(J))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var x=i(8505),N=i(3900),Q=i(4004),B=i(262),c=i(4670);const p=(0,a.PH)("[Profile Page] Set Profile Loading State",(0,a.Ky)()),F=(0,a.PH)("[Profile Page] Load Profile By User Email"),C=(0,a.PH)("[Profile Page] Load Profile Sucess",(0,a.Ky)());let D=(()=>{class e{constructor(o,r,s){this.actions$=o,this.store$=r,this.profileLoadService=s,this.loadProfile$=(0,u.GW)(()=>this.actions$.pipe((0,u.l4)(F),(0,x.b)(()=>this.store$.dispatch(p({loadingState:c.G.LOADING}))),(0,N.w)(()=>this.profileLoadService.getProfile$().pipe((0,x.b)(()=>this.store$.dispatch(p({loadingState:c.G.SUCCESS}))),(0,Q.U)(f=>C({profile:f})),(0,B.K)(()=>(0,L.of)(p({loadingState:c.G.LOADING_ERROR})))))))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(u.eX),t.LFG(a.yh),t.LFG(y))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const R=(0,a.Lq)({loadingState:c.G.LOADING,profile:{fullname:null,email:null,role:null}},(0,a.on)(p,(e,{loadingState:n})=>({...e,loadingState:n})),(0,a.on)(C,(e,{profile:n})=>({...e,profile:{...e.profile,...n}}))),T="profile",$=(0,a.ZF)(T),Y=(0,a.P1)($,e=>e.profile),k=(0,a.P1)($,e=>e.loadingState);let A=(()=>{class e{constructor(o){this.store$=o}get profile$(){return this.store$.select(Y)}get loadingState$(){return this.store$.select(k)}loadProfile(){this.store$.dispatch(F())}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(a.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var d=i(6582),M=i(2210);function w(e,n){if(1&e&&(t.TgZ(0,"a",7),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.Q6J("routerLink",o.routerLink),t.xp6(1),t.hij(" ",o.caption," ")}}function j(e,n){1&e&&(t.ynx(0),t.YNc(1,w,2,2,"a",6),t.BQk())}function z(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",9)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"span"),t._uU(7),t.qZA()(),t.BQk()),2&e){const o=n.tuiLet,r=t.oxw(2);let s,f,g;t.xp6(3),t.hij("\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ",null!==(s=null==o?null:o.fullname)&&void 0!==s?s:r.defaultValue,""),t.xp6(2),t.hij("\u041f\u043e\u0447\u0442\u0430: ",null!==(f=null==o?null:o.email)&&void 0!==f?f:r.defaultValue,""),t.xp6(2),t.hij("\u0420\u043e\u043b\u044c: ",null!==(g=null==o?null:o.role)&&void 0!==g?g:r.defaultValue,"")}}function H(e,n){if(1&e&&(t.ynx(0),t.YNc(1,z,8,3,"ng-container",8),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("tuiLet",t.lcZ(2,1,o.profile$))}}function V(e,n){1&e&&(t.ynx(0),t._UZ(1,"tui-loader",10),t.BQk()),2&e&&(t.xp6(1),t.Q6J("showLoader",!0))}function K(e,n){1&e&&t.GkF(0)}function W(e,n){if(1&e&&(t.ynx(0),t.YNc(1,K,1,0,"ng-container",11),t.BQk()),2&e){t.oxw();const o=t.MAs(11);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function X(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"Loading error"),t.qZA())}const b=[{path:"",component:(()=>{class e{constructor(o){this.profileDataService=o,this.loadingState=c.G,this.defaultValue="\u2014",this.breadcrumbItems=[{caption:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",routerLink:"../"},{caption:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",routerLink:"./"}],this.profile$=this.profileDataService.profile$,this.loadingState$=this.profileDataService.loadingState$}ngOnInit(){this.profileDataService.loadProfile()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(A))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:12,vars:7,consts:[["size","l"],[4,"ngFor","ngForOf"],[1,"header"],[3,"ngSwitch"],[4,"ngSwitchCase"],["error",""],["tuiLink","",3,"routerLink",4,"tuiItem"],["tuiLink","",3,"routerLink"],[4,"tuiLet"],[1,"info-block"],["size","xl",3,"showLoader"],[4,"ngTemplateOutlet"]],template:function(o,r){1&o&&(t.TgZ(0,"tui-breadcrumbs",0),t.YNc(1,j,2,0,"ng-container",1),t.qZA(),t.TgZ(2,"div",2)(3,"span"),t._uU(4,"\u041c\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),t.qZA()(),t.ynx(5,3),t.ALo(6,"async"),t.YNc(7,H,3,3,"ng-container",4),t.YNc(8,V,2,1,"ng-container",4),t.YNc(9,W,2,1,"ng-container",4),t.BQk(),t.YNc(10,X,2,0,"ng-template",null,5,t.W1O)),2&o&&(t.xp6(1),t.Q6J("ngForOf",r.breadcrumbItems),t.xp6(4),t.Q6J("ngSwitch",t.lcZ(6,5,r.loadingState$)),t.xp6(2),t.Q6J("ngSwitchCase",r.loadingState.SUCCESS),t.xp6(1),t.Q6J("ngSwitchCase",r.loadingState.LOADING),t.xp6(1),t.Q6J("ngSwitchCase",r.loadingState.LOADING_ERROR))},dependencies:[l.sg,l.tP,l.RF,l.n9,d.yS,v.l,M.w,S.V,h.Ls,P.kM,l.Ov],styles:[".info-block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{margin:1rem 0;display:flex;align-items:center;justify-content:space-between;font:var(--tui-font-heading-5)}"]}),e})()}];let _=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(b),d.Bz]}),e})();const q=[D];let tt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[y,A],imports:[l.ez,_,v.T,S.j,h.WD,P.dS,a.Aw.forFeature(T,R),u.sQ.forFeature(q)]}),e})()}}]);