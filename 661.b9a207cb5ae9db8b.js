"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[661],{4661:(b,m,i)=>{i.r(m),i.d(m,{ProfileModule:()=>X});var h=i(4227),l=i(6895),c=i(493),r=i(9653),P=i(9791),S=i(7819),v=i(1917),t=i(4650),T=i(9698),A=i(529);let E=(()=>{class e{constructor(o){this.http=o}fecthUser$(o){return this.http.get(`${T.J}/user/${o}`)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(A.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),L=(()=>{class e{constructor(o){this.userService=o}getProfileInfo$(){const o=localStorage.getItem("token")??"",a=JSON.parse(atob(o.split(".")[1]));return this.userService.fecthUser$(a.email)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(E))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var y=i(8505),G=i(3900),O=i(4004),U=i(262),I=i(9646),s=i(4670);const p=(0,r.PH)("[Profile Page] Set Profile Loading State",(0,r.Ky)()),x=(0,r.PH)("[Profile Page] Load Profile By User Email"),d=(0,r.PH)("[Profile Page] Load Profile Sucess",(0,r.Ky)());let Q=(()=>{class e{constructor(o,a,f){this.actions$=o,this.store$=a,this.profileLoadService=f,this.loadProfile$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(x),(0,y.b)(()=>this.store$.dispatch(p({loadingState:s.G.LOADING}))),(0,G.w)(()=>this.profileLoadService.getProfileInfo$().pipe((0,O.U)(u=>d({profile:u})),(0,U.K)(()=>(0,I.of)(p({loadingState:s.G.LOADING_ERROR}))))))),this.loadProfileSuccess$=(0,c.GW)(()=>this.actions$.pipe((0,c.l4)(d),(0,y.b)(()=>this.store$.dispatch(p({loadingState:s.G.SUCCESS})))),{dispatch:!1})}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(c.eX),t.LFG(r.yh),t.LFG(L))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();const N=(0,r.Lq)({loadingState:s.G.LOADING,profile:{fullname:null,email:null,password:null}},(0,r.on)(p,(e,{loadingState:n})=>({...e,loadingState:n})),(0,r.on)(d,(e,{profile:n})=>({...e,profile:{...e.profile,...n}}))),C="profile",F=(0,r.ZF)(C),B=(0,r.P1)(F,e=>e.profile),D=(0,r.P1)(F,e=>e.loadingState);let $=(()=>{class e{constructor(o){this.store$=o}get profile$(){return this.store$.select(B)}get loadingState$(){return this.store$.select(D)}loadProfile(){this.store$.dispatch(x())}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(r.yh))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var g=i(6582),k=i(2210);function J(e,n){if(1&e&&(t.TgZ(0,"a",7),t._uU(1),t.qZA()),2&e){const o=t.oxw().$implicit;t.Q6J("routerLink",o.routerLink),t.xp6(1),t.hij(" ",o.caption," ")}}function R(e,n){1&e&&(t.ynx(0),t.YNc(1,J,2,2,"a",6),t.BQk())}function Y(e,n){if(1&e&&(t.ynx(0),t.TgZ(1,"div",9)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.BQk()),2&e){const o=n.tuiLet,a=t.oxw(2);let f,u;t.xp6(3),t.hij("\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ",null!==(f=null==o?null:o.fullname)&&void 0!==f?f:a.defaultValue,""),t.xp6(2),t.hij("\u041f\u043e\u0447\u0442\u0430: ",null!==(u=null==o?null:o.email)&&void 0!==u?u:a.defaultValue,"")}}function M(e,n){if(1&e&&(t.ynx(0),t.YNc(1,Y,6,2,"ng-container",8),t.ALo(2,"async"),t.BQk()),2&e){const o=t.oxw();t.xp6(1),t.Q6J("tuiLet",t.lcZ(2,1,o.profile$))}}function z(e,n){1&e&&(t.ynx(0),t._UZ(1,"tui-loader",10),t.BQk()),2&e&&(t.xp6(1),t.Q6J("showLoader",!0))}function w(e,n){1&e&&t.GkF(0)}function j(e,n){if(1&e&&(t.ynx(0),t.YNc(1,w,1,0,"ng-container",11),t.BQk()),2&e){t.oxw();const o=t.MAs(11);t.xp6(1),t.Q6J("ngTemplateOutlet",o)}}function V(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"Loading error"),t.qZA())}const W=[{path:"",component:(()=>{class e{constructor(o){this.profileDataService=o,this.loadingState=s.G,this.defaultValue="\u2014",this.breadcrumbItems=[{caption:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",routerLink:"../"},{caption:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",routerLink:"./"}],this.profile$=this.profileDataService.profile$,this.loadingState$=this.profileDataService.loadingState$}ngOnInit(){this.profileDataService.loadProfile()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36($))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-profile"]],decls:12,vars:7,consts:[["size","l"],[4,"ngFor","ngForOf"],[1,"header"],[3,"ngSwitch"],[4,"ngSwitchCase"],["error",""],["tuiLink","",3,"routerLink",4,"tuiItem"],["tuiLink","",3,"routerLink"],[4,"tuiLet"],[1,"info-block"],["size","xl",3,"showLoader"],[4,"ngTemplateOutlet"]],template:function(o,a){1&o&&(t.TgZ(0,"tui-breadcrumbs",0),t.YNc(1,R,2,0,"ng-container",1),t.qZA(),t.TgZ(2,"div",2)(3,"span"),t._uU(4,"\u041c\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),t.qZA()(),t.ynx(5,3),t.ALo(6,"async"),t.YNc(7,M,3,3,"ng-container",4),t.YNc(8,z,2,1,"ng-container",4),t.YNc(9,j,2,1,"ng-container",4),t.BQk(),t.YNc(10,V,2,0,"ng-template",null,5,t.W1O)),2&o&&(t.xp6(1),t.Q6J("ngForOf",a.breadcrumbItems),t.xp6(4),t.Q6J("ngSwitch",t.lcZ(6,5,a.loadingState$)),t.xp6(2),t.Q6J("ngSwitchCase",a.loadingState.SUCCESS),t.xp6(1),t.Q6J("ngSwitchCase",a.loadingState.LOADING),t.xp6(1),t.Q6J("ngSwitchCase",a.loadingState.LOADING_ERROR))},dependencies:[l.sg,l.tP,l.RF,l.n9,g.yS,v.l,k.w,P.V,h.Ls,S.kM,l.Ov],styles:[".info-block[_ngcontent-%COMP%]{display:flex;flex-direction:column}.header[_ngcontent-%COMP%]{margin:1rem 0;display:flex;align-items:center;justify-content:space-between;font:var(--tui-font-heading-5)}"]}),e})()}];let H=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[g.Bz.forChild(W),g.Bz]}),e})();const K=[Q];let X=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[L,$],imports:[l.ez,H,v.T,P.j,h.WD,S.dS,r.Aw.forFeature(C,N),c.sQ.forFeature(K)]}),e})()}}]);