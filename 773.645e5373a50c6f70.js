"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[773],{1773:(Y,m,a)=>{a.r(m),a.d(m,{CoursesModule:()=>A});var u=a(6895),s=a(433),e=a(1571);let g=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,s.UX]}),t})();var f=a(7199),c=a(9698),v=a(529);let h=(()=>{class t{constructor(o){this.http=o}fetchCourses$(){return this.http.get(`${c.J}/courses`)}deleteCourses$(){return this.http.delete(`${c.J}/courses`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(v.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),C=(()=>{class t{constructor(o){this.http=o}fetchCourse$(o){return this.http.get(`${c.J}/course`,{params:{courseId:o}})}deleteCourse$(o){return this.http.delete(`${c.J}/course/${o}`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(v.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),_=(()=>{class t{constructor(o,n){this.coursesService=o,this.courseService=n,this.coursesData=new f.y([])}fetchCourses(){this.coursesService.fetchCourses$().subscribe(o=>this.coursesData.setState(o))}fetchCourse(o){return this.courseService.fetchCourse$(o)}deleteCourses(){this.coursesService.deleteCourses$().subscribe(()=>this.coursesData.setState([]))}removeCourse(o){this.courseService.deleteCourse$(o).subscribe(()=>this.coursesData.setState(this.coursesData.state.filter(n=>n._id!==o)))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(h),e.LFG(C))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var l=a(8468);function V(t,i){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"a",3),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.goToCourse(r.course._id))}),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onDeleteCourseEvent.emit(r.course._id))}),e._uU(6," Delete course "),e.qZA()()(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.course.name)}}let S=(()=>{class t{constructor(o,n){this.router=o,this.route=n,this.onDeleteCourseEvent=new e.vpe}ngOnInit(){}goToCourse(o){this.router.navigate(["./",o],{relativeTo:this.route})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.F0),e.Y36(l.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-course"]],inputs:{course:"course"},outputs:{onDeleteCourseEvent:"onDeleteCourseEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"course-block"],[1,"course-info"],[1,"name",3,"click"],[1,"delete-btn",3,"click"]],template:function(o,n){1&o&&e.YNc(0,V,7,1,"ng-container",0),2&o&&e.Q6J("ngIf",n.course)},dependencies:[u.O5],styles:[".course-block[_ngcontent-%COMP%]   .course-info[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();function x(t,i){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"app-course",2),e.NdJ("onDeleteCourseEvent",function(r){e.CHM(o);const d=e.oxw(2);return e.KtG(d.onDeleteCourse(r))}),e.qZA(),e.BQk()}if(2&t){const o=i.$implicit;e.xp6(1),e.Q6J("course",o)}}function b(t,i){if(1&t&&(e.ynx(0),e.YNc(1,x,2,1,"ng-container",1),e.BQk()),2&t){const o=i.ngIf;e.xp6(1),e.Q6J("ngForOf",o)}}let F=(()=>{class t{constructor(o){this.coursesStore=o,this.courses$=o.coursesData.state$}ngOnInit(){this.coursesStore.fetchCourses()}onDeleteCourse(o){this.coursesStore.removeCourse(o)}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(_))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-courses-list"]],decls:4,vars:3,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"course","onDeleteCourseEvent"]],template:function(o,n){1&o&&(e.TgZ(0,"h2"),e._uU(1,"Courses"),e.qZA(),e.YNc(2,b,2,1,"ng-container",0),e.ALo(3,"async")),2&o&&(e.xp6(2),e.Q6J("ngIf",e.lcZ(3,1,n.courses$)))},dependencies:[u.sg,u.O5,S,u.Ov]}),t})(),y=(()=>{class t{constructor(o){this.http=o}fetchVideo$(o){return this.http.get(`${c.J}/video`,{params:{videoId:o}})}uploadVideo$(o){return this.http.post(`${c.J}/video`,o)}deleteVideo$(o){return this.http.delete(`${c.J}/video/${o}`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(v.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),I=(()=>{class t{constructor(o){this.http=o}fetchVideos$(){return this.http.get(`${c.J}/videos`)}fetchVideosByCourseId$(o){return this.http.get(`${c.J}/videos/${o}`)}deleteVideos$(){return this.http.delete(`${c.J}/videos`)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(v.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Z=(()=>{class t{constructor(o,n){this.videoService=o,this.videosService=n,this.videoData=new f.y([])}fetchVideosByCourseId(o){this.videosService.fetchVideosByCourseId$(o).subscribe(n=>this.videoData.setState(n))}deleteVideos(){this.videosService.deleteVideos$().subscribe(()=>this.videoData.setState([]))}removeVideo(o){this.videoService.deleteVideo$(o).subscribe(()=>this.videoData.setState(this.videoData.state.filter(n=>n._id!==o)))}uploadFile(o){this.videoService.uploadVideo$(o).subscribe(n=>this.videoData.setState([...this.videoData.state,n]))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(y),e.LFG(I))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function T(t,i){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"div",2)(3,"span",3),e._uU(4),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onDeleteVideoEvent.emit(r.video._id))}),e._uU(6," Delete video "),e.qZA()(),e.TgZ(7,"div",5)(8,"video",6),e._UZ(9,"source",7),e.qZA()()(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(4),e.Oqu(o.video.title),e.xp6(5),e.Q6J("src",o.videoUrl,e.LSH)}}let D=(()=>{class t{constructor(){this.onDeleteVideoEvent=new e.vpe,this.videoUrl=""}ngOnInit(){this.setVideoUrl()}setVideoUrl(){this.videoUrl=`${c.J}/video/${this.video._id}`}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-video"]],inputs:{video:"video"},outputs:{onDeleteVideoEvent:"onDeleteVideoEvent"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"video-block"],[1,"video-info"],[1,"title"],[1,"delete-btn",3,"click"],[1,"video"],["controls","","width","250"],["type","video/mp4",3,"src"]],template:function(o,n){1&o&&e.YNc(0,T,10,2,"ng-container",0),2&o&&e.Q6J("ngIf",n.video)},dependencies:[u.O5],styles:[".video-block[_ngcontent-%COMP%]{margin-bottom:20px}.video-block[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]{display:flex;max-width:250px;justify-content:space-between;margin-bottom:8px}.video-block[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-right:10px;padding:2px 5px;border:1px solid teal;border-radius:3px}.video-block[_ngcontent-%COMP%]   .video-info[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{margin-left:10px;border-radius:5px;background-color:#e14242;cursor:pointer}"]}),t})();function $(t,i){if(1&t&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&t){const o=i.$implicit;e.Q6J("ngValue",o.name),e.xp6(1),e.hij(" ",o.name," ")}}function w(t,i){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"form",4),e.NdJ("ngSubmit",function(){e.CHM(o);const r=e.oxw();return e.KtG(r.onSubmit())}),e.TgZ(2,"label",5),e._uU(3,"Video name: "),e.qZA(),e._UZ(4,"input",6),e.TgZ(5,"label",7),e._uU(6,"Video: "),e.qZA(),e.TgZ(7,"input",8),e.NdJ("change",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onVideoFileChange(r))}),e.qZA(),e.TgZ(8,"label",9),e._uU(9,"Cover for video: "),e.qZA(),e.TgZ(10,"input",10),e.NdJ("change",function(r){e.CHM(o);const d=e.oxw();return e.KtG(d.onVideoCoverChange(r))}),e.qZA(),e.TgZ(11,"label",11),e._uU(12,"Course: "),e.qZA(),e.TgZ(13,"select",12)(14,"option",13),e._uU(15,"Select course"),e.qZA(),e.YNc(16,$,2,2,"option",14),e.ALo(17,"async"),e.qZA(),e.TgZ(18,"button",15),e._uU(19,"Create video"),e.qZA()(),e.BQk()}if(2&t){const o=e.oxw();e.xp6(1),e.Q6J("formGroup",o.videoForm),e.xp6(15),e.Q6J("ngForOf",e.lcZ(17,2,o.courses$))}}function J(t,i){if(1&t){const o=e.EpF();e.ynx(0),e.TgZ(1,"app-video",19),e.NdJ("onDeleteVideoEvent",function(r){e.CHM(o);const d=e.oxw(3);return e.KtG(d.onDeleteVideo(r))}),e.qZA(),e.BQk()}if(2&t){const o=i.$implicit;e.xp6(1),e.Q6J("video",o)}}function k(t,i){if(1&t&&(e.ynx(0),e.YNc(1,J,2,1,"ng-container",18),e.BQk()),2&t){const o=i.ngIf;e.xp6(1),e.Q6J("ngForOf",o)}}function N(t,i){if(1&t&&(e.YNc(0,k,2,1,"ng-container",17),e.ALo(1,"async")),2&t){const o=e.oxw();e.Q6J("ngIf",e.lcZ(1,1,o.videos$))}}let M=(()=>{class t{constructor(o,n){this.videosStore=o,this.coursesStore=n,this.isFormShown=!1,this.videoForm=new s.cw({videoName:new s.NI("",[s.kI.required]),videoFile:new s.NI("",[s.kI.required]),videoFileSource:new s.NI("",[s.kI.required]),videoCover:new s.NI("",[s.kI.required]),videoCoverSource:new s.NI("",[s.kI.required]),courseName:new s.NI("",[s.kI.required])}),this.videos$=o.videoData.state$,this.courses$=n.coursesData.state$}ngOnInit(){this.fetchVideosByCourseId(this.courseId),this.fetchCourses()}changeFormVisibility(){this.isFormShown=!this.isFormShown}onVideoFileChange(o){o.target?.files?.length>0&&this.videoForm.patchValue({videoFileSource:o.target.files[0]})}onVideoCoverChange(o){o.target?.files?.length>0&&this.videoForm.patchValue({videoCoverSource:o.target.files[0]})}onSubmit(){console.warn(this.videoForm.value);const o=this.videoForm.value.videoName,n=this.videoForm.value.videoFileSource,r=this.videoForm.value.videoCoverSource,d=this.videoForm.value.courseName;if(n&&r&&o&&d){const p=new FormData;p.append("title",o),p.append("video",n),p.append("cover",r),p.append("course",d),this.videosStore.uploadFile(p)}this.changeFormVisibility()}onDeleteVideo(o){this.videosStore.removeVideo(o)}fetchVideosByCourseId(o){this.videosStore.fetchVideosByCourseId(o)}fetchCourses(){this.coursesStore.fetchCourses()}onDeleteVideos(){this.videosStore.deleteVideos()}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(Z),e.Y36(_))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-videos-list"]],inputs:{courseId:"courseId"},decls:9,vars:2,consts:[[1,"upload-btn",3,"click"],[1,"delete-btn",3,"click"],[4,"ngIf","ngIfElse"],["videos",""],[3,"formGroup","ngSubmit"],["for","video-name"],["type","text","id","video-name","formControlName","videoName"],["for","video-file"],["type","file","id","video-file","formControlName","videoFile",3,"change"],["for","video-cover"],["type","file","id","video-cover","formControlName","videoCover",3,"change"],["for","video-course"],["formControlName","courseName"],["value",""],[3,"ngValue",4,"ngFor","ngForOf"],["type","submit",1,"upload-btn"],[3,"ngValue"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"video","onDeleteVideoEvent"]],template:function(o,n){if(1&o&&(e.TgZ(0,"h2"),e._uU(1,"Videos"),e.qZA(),e.TgZ(2,"button",0),e.NdJ("click",function(){return n.changeFormVisibility()}),e._uU(3,"New video"),e.qZA(),e.TgZ(4,"button",1),e.NdJ("click",function(){return n.onDeleteVideos()}),e._uU(5,"Delete all"),e.qZA(),e.YNc(6,w,20,4,"ng-container",2),e.YNc(7,N,2,3,"ng-template",null,3,e.W1O)),2&o){const r=e.MAs(8);e.xp6(6),e.Q6J("ngIf",n.isFormShown)("ngIfElse",r)}},dependencies:[u.sg,u.O5,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u,D,u.Ov],styles:[".upload-btn[_ngcontent-%COMP%]{margin-bottom:15px;border:1px solid black;border-radius:3px;background-color:#adff2f;cursor:pointer}.delete-btn[_ngcontent-%COMP%]{margin-left:10px;border-radius:5px;background-color:#e14242;cursor:pointer}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:150px}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]:not(:last-child){border-radius:4px;margin-bottom:10px}form[_ngcontent-%COMP%]   button[disabled][_ngcontent-%COMP%]{border-left:5px solid #a94442}"]}),t})();const O=[{path:"",component:F},{path:":id",component:(()=>{class t{constructor(o,n,r){this.route=o,this.coursesStore=n,this.courseService=r,this.courseId=this.route.snapshot.paramMap.get("id")??""}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(l.gz),e.Y36(_),e.Y36(C))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-course-detail"]],decls:2,vars:1,consts:[[1,"course-videos"],[3,"courseId"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"app-videos-list",1),e.qZA()),2&o&&(e.xp6(1),e.Q6J("courseId",n.courseId))},dependencies:[M]}),t})()}];let L=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(O),l.Bz]}),t})(),A=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[u.ez,L,g]}),t})()}}]);